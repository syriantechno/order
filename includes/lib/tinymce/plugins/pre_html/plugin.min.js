tinymce.PluginManager.add('pre_html', function(editor, url) {
  // Add a button that opens a window
  editor.addButton('pre_html', {
    text: '<pre>',
    icon: false,
    onclick: function() {
      // Open window
      var node = editor.selection.getNode();
      if (editor.selection.isCollapsed()) {
        editor.formatter.toggle('pre');
      } else {
        editor.formatter.toggle('pre');
      }
    }
  });

  // Adds a menu item to the tools menu
  editor.addMenuItem('pre_html', {
    text: '<pre>',
    context: 'tools'
  });
});
