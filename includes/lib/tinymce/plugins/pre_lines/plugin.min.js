! function() {
    tinymce.create("tinymce.plugins.pre_linesPlugin", {
        init: function(e) {
            var t = this,
                n = e.getParam("pre_lines_dialect", "punbb").toLowerCase();
            e.on("beforeSetContent", function(e) {

            }), e.on("postProcess", function(e) {
                e.set && (e.content = t["_" + n + "_bbcode2html"](e.content)), e.get && (e.content = t["_" + n + "_html2bbcode"](e.content))
            })
        },
        getInfo: function() {
            return {
                longname: "Pre Lines Plugin",
                author: "Minan",
                authorurl: "http://www.ultra.org",
            }
        },
        _punbb_html2bbcode: function(e) {
            function t(t, n) {
                e = e.replace(t, n);
            }
            return e = tinymce.trim(e), t(/<br \/>/gi, "\n"), t(/<br\/>/gi, "\n"), t(/<br>/gi, "\n"), t(/&nbsp;&nbsp;&nbsp;/gi, "\t"), e;
            
        },
        _punbb_bbcode2html: function(e) {
            function t(t, n) {
                e = e.replace(t, n)
            }
            return e = tinymce.trim(e), t(/\n/gi, "<br />"), t(/&nbsp;&nbsp;&nbsp;/gi, "aa"), e

        }
    }), tinymce.PluginManager.add("pre_lines", tinymce.plugins.pre_linesPlugin)

}();